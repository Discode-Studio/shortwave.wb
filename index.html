<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Main page › Signabroam</title>
    <link rel="stylesheet" href="getout.css">
    <link rel="stylesheet" href="menu ">
    <meta property="og:title" content="Signabroam">
    <meta property="og:description" content="This website is make for purpose things like informations and bots about Shortwaves and Numbers Stations.">
</head>
<style>
  .date {
            font-family: Arial, sans-serif;
            text-align: left;
        }
</style>
<style>
        /* Conteneur de l'iframe */
        .iframe-container {
            width: 100%; /* Adapter à la taille du parent */
            height: 500px; /* Hauteur de l'iframe */
            overflow: hidden; /* Masquer les débordements */
            border: none; /* Pas de bordure */
        }

        /* Appliquer un zoom à l'iframe */
        .iframe-container iframe {
            width: 200%; /* Augmenter la taille initiale de l'iframe */
            height: 200%; /* Augmenter la hauteur pour éviter les débordements */
            transform: scale(0.5); /* Appliquer le zoom */
            transform-origin: 0 0; /* Garder le coin supérieur gauche comme point de référence */
            border: none; /* Pas de bordure */
            border-radius: 10px;
        }
        
    </style>
<body>
    <header>
        <div class="logo">
            <h1>Signabroam</h1>
        </div>
        <nav>
            <ul>
                <li><a href="http://websdr.org">WebSDR</a> <a href="http://rx.kiwisdr.com">KiwiSDR</a> <a href="openwebrx.de">OpenWebrx</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section class="intro">
            <h2>Welcome!</h2>
            <p>
                This website is make for purpose things like informations and bots about Shortwaves and Numbers Stations.
            </p>
        </section>
<script>
        function formatDateTime() {
            const now = new Date();
            
            // Format for the date: weekday, day month year
            const daysOfWeek = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
            const months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
            
            const dayOfWeek = daysOfWeek[now.getDay()];
            const day = now.getDate();
            const month = months[now.getMonth()];
            const year = now.getFullYear();
            
            // Format for the date in text
            const dateText = `${dayOfWeek}, ${day} ${month} ${year}`;
            
            // UTC Time
            const utcHour = now.getUTCHours().toString().padStart(2, '0');
            const utcMinute = now.getUTCMinutes().toString().padStart(2, '0');
            const utcSecond = now.getUTCSeconds().toString().padStart(2, '0');
            
            // Local Time (Moscow is UTC+3)
            const moscowOffset = 3 * 60; // Moscow is UTC+3
            const localMinutes = now.getUTCMinutes() + now.getUTCHours() * 60 + moscowOffset;
            const localHour = Math.floor(localMinutes / 60).toString().padStart(2, '0');
            const localMinute = (localMinutes % 60).toString().padStart(2, '0');
            const localSecond = now.getSeconds().toString().padStart(2, '0');
            
            document.getElementById('datetime').innerHTML = `
                ${dateText}<br>
               UTC ${utcHour}:${utcMinute}:${utcSecond} UTC-0 <br>
                MSK ${localHour}:${localMinute}:${localSecond} Local
            `;
        }

        // Update the time every second
        setInterval(formatDateTime, 1000);
        
        // Initial call to display the time immediately
        formatDateTime();
    </script>
        <section class="content">
            <h3>Last frequency update</h3>
            <!-- Section pour afficher les messages récupérés dans une boîte défilante -->
            <div id="messages"></div>

            <!-- Script Firebase pour afficher les messages -->
            <script type="module">
                // Import the functions you need from the SDKs you need
                import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
                import { getDatabase, ref, onChildAdded } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js";

                // Your web app's Firebase configuration
                const firebaseConfig = {
                    apiKey: "AIzaSyBiwCxX52J4bF7iYN8V7Jsm1TeJ0P8U27U",
                    authDomain: "uvb-76.firebaseapp.com",
                    databaseURL: "https://uvb-76-default-rtdb.europe-west1.firebasedatabase.app",
                    projectId: "uvb-76",
                    storageBucket: "uvb-76.appspot.com",
                    messagingSenderId: "1056404416263",
                    appId: "1:1056404416263:web:d4430ecbdefde9119507a2"
                };

                // Initialize Firebase
                const app = initializeApp(firebaseConfig);
                const db = getDatabase(app);
                const messagesRef = ref(db, 'messages');

                // Fonction pour afficher les messages depuis Firebase et scroller automatiquement
                onChildAdded(messagesRef, function(snapshot) {
                    const messageData = snapshot.val();
                    const entry = messageData.entry;

                    const messageDiv = document.createElement('div');
                    messageDiv.className = 'message';
                    messageDiv.textContent = entry;

                    document.getElementById('messages').appendChild(messageDiv);

                    // Scroll automatique vers le bas
                    const messagesDiv = document.getElementById('messages');
                    messagesDiv.scrollTop = messagesDiv.scrollHeight;
                });
            </script>
        </section>
        <br>
         <section class="content">
          <h3>Online AutoReloader</h3>
          <p>AutoReloader is reloading sdr every each 30 minutes, the reloader is still experimental.</p>
          <section class="cube">
            <ul>
              <li><a href="uvbrl.html">UVB-76 AutoReload</a></li>
              <li><a href="alarmrl.html">The alarm AutoReload</a></li>
            </ul>
          </section>
        </section>
        <br>
        <section class="content">
            <h3>SDR and Time of ionosphere</h3>
            <section class="cube">
                <center>
                  <b><div class="date" id="datetime">
        <!-- Date et Heure seront insérés ici -->
    </div></b>
                    <a href="https://www.hamqsl.com/solar.html" title="Click to add Solar-Terrestrial Data to your website!">
                        <img src="https://www.hamqsl.com/solar101vhfpic.php">
                    </a>
                </center>
                <center>
                    <a href="https://www.hamqsl.com/solar.html" title="Click to add Solar-Terrestrial Data to your website!">
                        <img src="https://www.hamqsl.com/solarmuf.php">
                    </a>
                    <a href="https://www.hamqsl.com/solar.html" title="Click to add Solar-Terrestrial Data to your website!">
                        <img src="https://www.hamqsl.com/marston.php">
                    </a>
                </center>
            </section>
        </section>
        <br>
        <script>
    // Fonction pour changer l'URL de l'iframe en fonction de la sélection
    function changeIframeURL() {
        var selector = document.getElementById("siteSelector");
        var iframe = document.getElementById("myIframe");
        var selectedURL = selector.value;

        // Changer la source de l'iframe à l'URL sélectionnée
        iframe.src = selectedURL;
    }

    // Fonction pour couper/démuter le son de la page
    function toggleMute() {
        var iframe = document.getElementById("myIframe");
        iframe.muted = !iframe.muted; // alterne entre mute et unmute
    }

    // Fonction pour zoomer/dézoomer la page
    function zoomIn() {
        var iframe = document.getElementById("myIframe");
        var currentZoom = iframe.style.zoom ? parseFloat(iframe.style.zoom) : 1;
        iframe.style.zoom = currentZoom + 0.1; // augmente le zoom de 10%
    }

    function zoomOut() {
        var iframe = document.getElementById("myIframe");
        var currentZoom = iframe.style.zoom ? parseFloat(iframe.style.zoom) : 1;
        iframe.style.zoom = currentZoom - 0.1; // réduit le zoom de 10%
    }

    // Fonction pour actualiser l'iframe
    function refreshIframe() {
        var iframe = document.getElementById("myIframe");
        iframe.src = iframe.src; // recharge la même source
    }

    // Fonction pour aller à la page précédente
    function goBack() {
        window.history.back(); // utilise l'historique du navigateur pour revenir
    }

    // Fonction pour aller à la page suivante
    function goForward() {
        window.history.forward(); // utilise l'historique du navigateur pour avancer
    }
</script>
<style>
  .controls button {
   background-color: transparent;
   border: none;
   border-radius: 300px;
   padding: 5px;
   color: white;
  }
  
  .controls img {
    max-height: 30px;
    max-width: 30px;
  }
</style>
<div class="content">
    <h3>SDR Player</h3>
    <div class="cube">
        <!-- Sélecteur avec des sites prédéfinis -->
        <label for="siteSelector">SDR Player :</label>
        <select id="siteSelector" onchange="changeIframeURL()">
            <option value="about:blank">-- Select an SDR --</option>
            <option value="" disabled>> WebSDR</option>
            <option value="http://websdr.ewi.utwente.nl:8901/">uTwente SDR</option>
            <option value="http://websdr.78dx.ru:8901/">Saint-petersburg SDR</option>
            <option value="" disabled>> KiwiSDR</option>
            <option value="http://kiwi-kuo.aprs.fi:8073/">Kuopio aprs.fi</option>
            <option value="http://81.166.116.237:8073/">Tjelta Norway</option>
            <option value="https://khv.swl.su/">RussiaSWL</option>
            <option value="http://80.146.82.2:8073/">DL3ZID</option>
            <option value="http://fsdr.duckdns.org/">DuckDNS Hungary</option>
            <option value="http://188.162.63.103:8073/">Saratov (good for airhorn)</option>
            <option value="http://oh3aa.dy.fi:18073/">OH3AA (Finland)</option>
            <option value="" disabled>> OpenWebrx</option>
            <option value="https://2.websdr.jestok.com/">SR4DON (OpenWebrx+)(Poland)</option>
            <option value="http://jimjackii.no-ip.org/owrx/">EDDC2 (Germany)</option>
            <option value="" disabled>> YouTube Stream</option>
            <option value="https://www.youtube.com/embed/8h_D2P0iqMk?si=wdQTQ08fkEwVqoDH">The SWL Channel</option>
            <option value="https://www.youtube.com/embed/JowZmgyXtks?si=gxZLN0JaNlW4FNgS">Shortwave Nepann</option>
            <option value="" disabled>> Experimental</option>
            <option value="http://discode-studio.github.io/shortwave.bot/">Signabroam</option>
        </select>
        
        <div class="controls">
            <button onclick="zoomIn()"><img src="https://raw.githubusercontent.com/jketterl/openwebrx/a9f47be96dd213127d9011de9d15ca5171e6b950/inkscape%20files/openwebrx-zoom-in.svg" alt="Zoomin"></button>
            <button onclick="zoomOut()"><img src="https://raw.githubusercontent.com/jketterl/openwebrx/a9f47be96dd213127d9011de9d15ca5171e6b950/inkscape%20files/openwebrx-zoom-out.svg" alt="Zoomout"></button>
            <button onclick="refreshIframe()">Refresh</button>
            <button onclick="goBack()">Back</button>
            <button onclick="goForward()">Forward</button>
        </div>

        <!-- Conteneur de l'iframe qui affiche la page sélectionnée -->
        
        <div class="iframe-container">
            <iframe id="myIframe" src="about:blank" width="100%" height="100%"></iframe>
        </div>
        <h3>Chatbox</h3>
          <div id="message"></div>
    <input type="text" id="callsign-input" placeholder="Enter your callsign...">
    <input type="text" id="message-input" placeholder="Type a message...">
    <button id="send-button">Send</button>

<script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js";
        import { getDatabase, ref, push, set, onChildAdded } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-database.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCyqBx_12bGJvusjqkeB7ERRQ-AdEHPi5Q",
            authDomain: "signabroam-onuser.firebaseapp.com",
            databaseURL: "https://signabroam-onuser-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "signabroam-onuser",
            storageBucket: "signabroam-onuser.appspot.com",
            messagingSenderId: "825281231900",
            appId: "1:825281231900:web:d9658c066f636b2977f3d9",
            measurementId: "G-FK72VS3X9N"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);

        // References
        const messagesRef = ref(database, 'message');
        const messagesDiv = document.getElementById('message');
        const messageInput = document.getElementById('message-input');
        const callsignInput = document.getElementById('callsign-input');
        const sendButton = document.getElementById('send-button');

        // Send message
        sendButton.addEventListener('click', () => {
            const message = messageInput.value.trim();
            const callsign = callsignInput.value.trim();
            if (message && callsign) {
                const newMessageRef = push(messagesRef);
                set(newMessageRef, { text: message, callsign: callsign });
                messageInput.value = '';
                callsignInput.value = '';
            } else {
                alert('Please enter both a callsign and a message.');
            }
        });

        // Listen for new messages
        onChildAdded(messagesRef, (snapshot) => {
            const message = snapshot.val();
            const messageDiv = document.createElement('div');
            messageDiv.textContent = `${message.callsign}: ${message.text}`;
            messagesDiv.appendChild(messageDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight; // Auto-scroll to latest message
            
            localStorage.setItem('message', messagesDiv.value);
        });
    </script>
</div>
</div>
<br>
            <section class="content">
          <h3>Radio player</h3>
          <section class="cube">
<!-- Sélection de fichiers audio avec un select -->
<div>
  <h3>Radio doesn't work? <br>Edit the site link from https to http</h3>
    <label for="audioSelect">Select a station:</label>
    <select id="audioSelect" onchange="playAudio(this.value)">
        <option value="" disabled selected>Choose a station</option>
        <option value="" disabled>> Shortwave & Number stations</option>
        <option value="http://stream.priyom.org:8000/buzzer">UZB-76</option>
        <option value="http://stream.priyom.org:8000/pip-day.ogg">The PIP Day</option>
        <option value="http://stream.priyom.org:8000/pip-night.ogg">The PIP Night</option>
        <option value="http://stream.priyom.org:8000/wheel-day.ogg">The Squeaky Wheel Day</option>
        <option value="http://stream.priyom.org:8000/wheel-night.ogg">The Squeaky Wheel Night</option>
        <option value="" disabled>> FM/ONLINE Radio</option>
        <option value="http://manager8.streamradio.fr:1930/stream">Online Radio (FR)</option>
        <option value="https://cast.iplayradio.net/listen/powermixfm/stream">PowerMixFM</option>
        <option value="https://air.racyja.com/pinsk">SVOYO (RUS)</option>
        <option value="https://air.racyja.com/racja96">Racja (BL-RUS)</option>
        <option value="https://manager6.streamradio.fr:2735/stream">Radio Le Zoo (FR) (Take 5 seconds to load)</option>
        <option value="https://radiouji.uji.es:8443/high.ogg">UJI</option>
        <option value="http://rustradio.org:9000/stream.ogg">Rust (FR)</option>
        <option value="http://radio-active.net:8000/active">Associative de l'aire toulonnaise (FR)</option>
        <option value="http://radio.linn.co.uk:8003/autodj">Linn (Take 5 seconds to load)</option>
        <option value="http://icecast.infini.fr:8000/mutine">Mutine (FR)</option>
        <option value="http://stream.radios-arra.fr:8000/contactfm">ContactFM (FR)</option>
        <option value="http://stream.radios-arra.fr:8000/fmplus">FM+ (FR)</option>
    </select>
</div>

<!-- Input range pour le volume de l'audio -->
<div>
    <label for="volumeControl">Volume</label>
    <input type="range" id="volumeControl" min="0" max="1" step="0.001" value="1" oninput="setVolume(this.value)">
    <input type="checkbox" id="muteControl" onchange="toggleMute(this.checked)"> <label for="muteControl">Mute</label>
</div>

<!-- Barre de lecture en bas de la page -->
<div id="nowPlaying" style="bottom: 0; width: 100%; background-color: #222; color: white; padding: 10px; text-align: center; border-radius: 15px;">
    <span id="stationName">Station: None</span> <br />
    <span id="currentTrack">Currently: None</span>
</div>

<script>
    let audio = new Audio();
    let currentTrack = document.getElementById("currentTrack");
    let stationName = document.getElementById("stationName");

    // Liste des stations spéciales pour le message personnalisé
    const specialStations = [
        "buzzer",
        "pip-day.ogg",
        "pip-night.ogg",
        "wheel-day.ogg",
        "wheel-night.ogg"
    ];

    // Fonction pour jouer l'audio sélectionné
    function playAudio(src) {
        if (src) {
            audio.src = src;
            audio.play();

            let stationLabel = src.split('://').pop('/').split('/').pop();
            stationName.innerText = "Station: " + stationLabel;

            // Vérifier si la station fait partie des stations spéciales
            if (specialStations.some(station => src.includes(station))) {
                currentTrack.innerText = "Currently: This is a military station extracted from SDR";
            } else {
                fetchIcecastMetadata(src);  // Appel pour récupérer les métadonnées Icecast
            }
        }
    }

    // Fonction pour régler le volume
    function setVolume(volume) {
        audio.volume = volume;
    }

    // Fonction pour activer/désactiver le mute
    function toggleMute(isMuted) {
        audio.muted = isMuted;
    }

    // Fonction pour interroger Icecast et récupérer les métadonnées
    function fetchIcecastMetadata(streamUrl) {
        const statusUrls = [
            streamUrl.replace(/\/stream.*$/, "/status-json.xsl"),
            streamUrl.replace(/\/stream.*$/, "/status.xsl"),
            streamUrl.replace(/\/stream.*$/, "/status2.xsl")
        ];

        // Fonction pour essayer les différentes URL de statut
        function tryFetch(urls, index = 0) {
            if (index >= urls.length) {
                // Afficher le nom du fichier audio ou un message générique si aucune info n'est disponible
                let filename = streamUrl.split('/').pop();
                currentTrack.innerText = `Currently: No information available about the current track (File: ${filename})`;
                return;
            }

            fetch(urls[index])
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`URL not available: ${urls[index]}`);
                    }
                    return response.json();
                })
                .then(data => {
                    // Chercher les informations sur la piste en cours (adapté selon le format Icecast)
                    if (data && data.icestats && data.icestats.source) {
                        let source = Array.isArray(data.icestats.source) ? data.icestats.source[0] : data.icestats.source;
                        if (source.title) {
                            currentTrack.innerText = `Currently: No information available about the current track (File: ${filename})`;
                return;
            }

            fetch(urls[index])
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`URL not available: ${urls[index]}`);
                    }
                    return response.json();
                })
                .then(data => {
                    // Chercher les informations sur la piste en cours (adapté selon le format Icecast)
                    if (data && data.icestats && data.icestats.source) {
                        let source = Array.isArray(data.icestats.source) ? data.icestats.source[0] : data.icestats.source;
                        if (source.title) {
                            currentTrack.innerText = `Currently: ${source.title}`;
                        } else {
                            currentTrack.innerText = "Currently: No track information";
                        }
                    } else {
                        currentTrack.innerText = "Currently: No metadata available";
                    }
                })
                .catch(error => {
                    console.log(`Trying next URL due to error: ${error.message}`);
                    tryFetch(urls, index + 1);  // Essayer l'URL suivante en cas d'erreur
                });
        }

        tryFetch(statusUrls);  // Démarrer avec la première URL de statut
    }
</script>
          </section>
        </section>
        <br>
        <section class="content">
          <h3>Bots</h3>
          <h4>click on one of the link below to invite the bot.</h4>
          <section class="cube">
             <h3>Shortwave</h3>
          <li><a href="https://discord.com/oauth2/authorize?client_id=1277260205780111380&permissions=8&integration_type=0&scope=bot">UVB-76</a></li>
          <li><a href="https://discord.com/oauth2/authorize?client_id=1277971678273605694&permissions=8&integration_type=0&scope=bot">The PIP Day</a></li>
          <li><a href="https://discord.com/oauth2/authorize?client_id=1277978599583911946&permissions=8&integration_type=0&scope=bot">The PIP Night</a></li>
          <li><a href="https://discord.com/oauth2/authorize?client_id=1278053516841189417&permissions=8&integration_type=0&scope=bot">The Squeaky Wheel Day</a></li>
          <li><a href="https://discord.com/oauth2/authorize?client_id=1278060375799234601&permissions=8&integration_type=0&scope=bot">The Squeaky Wheel Night</a></li>
          <br><h3>Music</h3>
          <li><a href="https://discord.com/oauth2/authorize?client_id=1179403702629564457&permissions=8&integration_type=0&scope=bot">Xenorion Music</a></li>
          </section>
        </section>
        <br>
        <section class="content">
          <h3>Known pirates</h3>
          <section class="cube">
            <h3>UVB-76:</h3>
            <li><a href="triangle.htm">∆∆∆ / ∆X3 "The3Triangle"</a></li>
            <li><a href="e12.htm">E12 [unknown]</a></li>
            <li><a href="rusguy.htm">Russian guy [unknown]</a></li>
          </section>
        </section>
    </main>
    <footer>
        <p>&copy; Discode Studio (some sources come from <a href="http://priyom.org">priyom.org</a>)</p>
    </footer>
</body>
</html>
